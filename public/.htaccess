# Apache configuration for proper HTTP status codes

RewriteEngine On

# Handle robots.txt and sitemap.xml with correct status codes
RewriteRule ^robots\.txt$ /robots.txt [L,R=200]
RewriteRule ^sitemap\.xml$ /sitemap.xml [L,R=200]

# Handle React SPA routing
# All requests that are NOT for existing files/directories go to index.html
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/robots\.txt$
RewriteCond %{REQUEST_URI} !^/sitemap\.xml$
RewriteRule . /index.html [L]

# Set proper headers for static files
<FilesMatch "\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$">
    Header set Cache-Control "public, max-age=31536000"
</FilesMatch>

# Ensure HTML files are not cached
<FilesMatch "\.html$">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires "0"
</FilesMatch>