export interface DocumentData {
  wish: string;
  intensity: number;
  amount: number;
  email: string;
  userName: string;
  documentId: string;
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞—Ñ—Ñ–∏—Ä–º–∞—Ü–∏–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∂–µ–ª–∞–Ω–∏—è
export const getAffirmationsForWish = (wish: string) => {
  const lowerWish = wish.toLowerCase();
  
  if (lowerWish.includes('–ª—é–±–æ–≤—å') || lowerWish.includes('–æ—Ç–Ω–æ—à–µ–Ω–∏—è')) {
    return `‚Ä¢ –Ø –ø—Ä–∏—Ç—è–≥–∏–≤–∞—é –Ω–∞—Å—Ç–æ—è—â—É—é –ª—é–±–æ–≤—å –≤ —Å–≤–æ—é –∂–∏–∑–Ω—å
‚Ä¢ –ú–æ—ë —Å–µ—Ä–¥—Ü–µ –æ—Ç–∫—Ä—ã—Ç–æ –¥–ª—è –≥–ª—É–±–æ–∫–∏—Ö –∏ –∏—Å–∫—Ä–µ–Ω–Ω–∏—Ö —á—É–≤—Å—Ç–≤
‚Ä¢ –Ø –¥–æ—Å—Ç–æ–∏–Ω/–¥–æ—Å—Ç–æ–π–Ω–∞ –±–µ–∑—É—Å–ª–æ–≤–Ω–æ–π –ª—é–±–≤–∏ –∏ —Å—á–∞—Å—Ç—å—è
‚Ä¢ –õ—é–±–æ–≤—å –ø—Ä–∏—Ö–æ–¥–∏—Ç –∫–æ –º–Ω–µ –ª–µ–≥–∫–æ –∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ
‚Ä¢ –Ø –∏–∑–ª—É—á–∞—é –ª—é–±–æ–≤—å –∏ –ø—Ä–∏–≤–ª–µ–∫–∞—é –µ—ë –≤ –æ—Ç–≤–µ—Ç`;
  }
  
  if (lowerWish.includes('–¥–µ–Ω—å–≥–∏') || lowerWish.includes('–±–æ–≥–∞—Ç—Å—Ç–≤–æ') || lowerWish.includes('—Ñ–∏–Ω–∞–Ω—Å—ã')) {
    return `‚Ä¢ –î–µ–Ω—å–≥–∏ –ª–µ–≥–∫–æ –∏ —Å–≤–æ–±–æ–¥–Ω–æ —Ç–µ–∫—É—Ç –≤ –º–æ—é –∂–∏–∑–Ω—å
‚Ä¢ –Ø –ø—Ä–∏—Ç—è–≥–∏–≤–∞—é —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–µ –∏–∑–æ–±–∏–ª–∏–µ –≤–æ –≤—Å–µ—Ö —Å—Ñ–µ—Ä–∞—Ö
‚Ä¢ –ú–æ–∏ –¥–æ—Ö–æ–¥—ã —Ä–∞—Å—Ç—É—Ç —Å –∫–∞–∂–¥—ã–º –¥–Ω–µ–º
‚Ä¢ –Ø –¥–æ—Å—Ç–æ–∏–Ω/–¥–æ—Å—Ç–æ–π–Ω–∞ –±–æ–≥–∞—Ç—Å—Ç–≤–∞ –∏ –ø—Ä–æ—Ü–≤–µ—Ç–∞–Ω–∏—è
‚Ä¢ –í—Å–µ–ª–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–æ–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–µ –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏–µ`;
  }
  
  if (lowerWish.includes('–∑–¥–æ—Ä–æ–≤—å–µ') || lowerWish.includes('–∏—Å—Ü–µ–ª–µ–Ω–∏–µ')) {
    return `‚Ä¢ –ú–æ–µ —Ç–µ–ª–æ –∏—Å—Ü–µ–ª—è–µ—Ç—Å—è —Å –∫–∞–∂–¥—ã–º –¥–Ω–µ–º
‚Ä¢ –Ø –∏–∑–ª—É—á–∞—é –∂–∏–∑–Ω–µ–Ω–Ω—É—é —ç–Ω–µ—Ä–≥–∏—é –∏ —Å–∏–ª—É
‚Ä¢ –ö–∞–∂–¥–∞—è –∫–ª–µ—Ç–∫–∞ –º–æ–µ–≥–æ —Ç–µ–ª–∞ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∞ –∑–¥–æ—Ä–æ–≤—å–µ–º
‚Ä¢ –Ø –ø—Ä–∏–Ω–∏–º–∞—é —Ä–µ—à–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –º–æ–µ –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏–µ
‚Ä¢ –ú–æ–µ —Ç–µ–ª–æ –∏ —Ä–∞–∑—É–º –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –≥–∞—Ä–º–æ–Ω–∏–∏`;
  }
  
  // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –∞—Ñ—Ñ–∏—Ä–º–∞—Ü–∏–∏
  return `‚Ä¢ –Ø –ø—Ä–∏—Ç—è–≥–∏–≤–∞—é –≤ —Å–≤–æ—é –∂–∏–∑–Ω—å –≤—Å–µ, —á—Ç–æ –º–Ω–µ –Ω—É–∂–Ω–æ
‚Ä¢ –í—Å–µ–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –º–æ—é –ø–æ–ª—å–∑—É
‚Ä¢ –ú–æ–∏ –∂–µ–ª–∞–Ω–∏—è –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è –ª–µ–≥–∫–æ –∏ –≥–∞—Ä–º–æ–Ω–∏—á–Ω–æ
‚Ä¢ –Ø –æ—Ç–∫—Ä—ã—Ç/–æ—Ç–∫—Ä—ã—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏–π
‚Ä¢ –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç –º–µ–Ω—è –∫ —Ü–µ–ª–∏`;
};

// –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
export const generateAndDownloadDocument = (documentData: DocumentData) => {
  if (!documentData) return;
  
  const documentId = `WD${Date.now()}${Math.random().toString(36).substring(2, 7).toUpperCase()}`;
  const currentDate = new Date().toLocaleDateString('ru-RU');
  
  const pdfContent = `
üåü –î–û–ö–£–ú–ï–ù–¢ –ê–§–§–ò–†–ú–ê–¶–ò–ò –ñ–ï–õ–ê–ù–ò–Ø
–ù–æ–º–µ—Ä: ${documentId}
–î–∞—Ç–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏: ${currentDate}

üéØ –í–ê–®–ï –ñ–ï–õ–ê–ù–ò–ï: "${documentData.wish}"
‚ö° –£–†–û–í–ï–ù–¨ –°–ò–õ–´: ${documentData.intensity}/10
üí∞ –≠–ù–ï–†–ì–ï–¢–ò–ß–ï–°–ö–ò–ô –í–ö–õ–ê–î: ${documentData.amount} ‚ÇΩ

‚ú® –ü–ï–†–°–û–ù–ê–õ–¨–ù–´–ï –ê–§–§–ò–†–ú–ê–¶–ò–ò:
${getAffirmationsForWish(documentData.wish)}

üîÆ –ò–ù–°–¢–†–£–ö–¶–ò–ò –ü–û –ê–ö–¢–ò–í–ê–¶–ò–ò:
1. –ß–∏—Ç–∞–π—Ç–µ –∞—Ñ—Ñ–∏—Ä–º–∞—Ü–∏–∏ –∫–∞–∂–¥–æ–µ —É—Ç—Ä–æ –ø–æ—Å–ª–µ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è
2. –í–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –∂–µ–ª–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç 5-10 –º–∏–Ω—É—Ç
3. –ü–æ–≤—Ç–æ—Ä—è–π—Ç–µ –∞—Ñ—Ñ–∏—Ä–º–∞—Ü–∏–∏ –≤–µ—á–µ—Ä–æ–º –ø–µ—Ä–µ–¥ —Å–Ω–æ–º
4. –í–µ—Ä—å—Ç–µ –≤ —Å–∏–ª—É —Å–≤–æ–∏—Ö —Å–ª–æ–≤ –∏ –Ω–∞–º–µ—Ä–µ–Ω–∏–π

üí´ –≠–ù–ï–†–ì–ï–¢–ò–ß–ï–°–ö–ò–ô –°–¢–ê–¢–£–°: –ê–ö–¢–ò–í–ò–†–û–í–ê–ù ‚úÖ

–ü–æ–ª—É—á–∞—Ç–µ–ª—å: ${documentData.userName}
Email: ${documentData.email}
  `;

  // –°–æ–∑–¥–∞–µ–º blob –∏ —Å–∫–∞—á–∏–≤–∞–µ–º –∫–∞–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
  const blob = new Blob([pdfContent], { type: 'text/plain;charset=utf-8' });
  const url = window.URL.createObjectURL(blob);
  const link = document.createElement('a');
  link.href = url;
  link.download = `–î–æ–∫—É–º–µ–Ω—Ç_–∞—Ñ—Ñ–∏—Ä–º–∞—Ü–∏–∏_${documentId}.txt`;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  window.URL.revokeObjectURL(url);
};